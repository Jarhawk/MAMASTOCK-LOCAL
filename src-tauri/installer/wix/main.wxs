<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">

  <Product
    Id="*"
    Name="MAMASTOCK"
    Manufacturer="Quentin Vanel"
    Version="0.1.0"
    Language="1036"
    UpgradeCode="{B035F2E7-24E4-4486-A2EB-956DB8291C23}">

    <Package InstallerVersion="500" Compressed="yes" InstallScope="perMachine" />
    <MediaTemplate EmbedCab="yes" />

    <!-- Icône ARP (chemin relatif depuis src-tauri\installer\wix) -->
    <Icon Id="AppIcon" SourceFile="..\..\icons\icon.ico" />
    <Property Id="ARPPRODUCTICON" Value="AppIcon" />

    <MajorUpgrade DowngradeErrorMessage="Une version plus récente est déjà installée." />

    <!-- Dossier d'installation -->
    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLFOLDER" Name="MAMASTOCK" />
      </Directory>
    </Directory>

    <!-- Les fichiers de l'appli injectés par Tauri -->
    <Feature Id="MainFeature" Title="MAMASTOCK" Level="1">
      <ComponentGroupRef Id="AppFiles" />
    </Feature>

    <!-- Variables UI (placées DANS Product !) -->
    <WixVariable Id="WixUILicenseRtf" Value="license-fr.rtf" />
    <WixVariable Id="WixUIBannerBmp"  Value="banner.bmp" />
    <WixVariable Id="WixUIDialogBmp"  Value="dialog.bmp" />

    <!-- Chaîne d'UI avec choix du dossier -->
    <Property Id="WIXUI_INSTALLDIR" Value="INSTALLFOLDER" />
    <UIRef Id="WixUI_InstallDir" />
  </Product>
</Wix>
